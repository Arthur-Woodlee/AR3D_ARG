//
//  AddNewGraph.html
//  AR3D_Augmented_Reality_Graphing
//
//  Created by Arthur Woodlee on 2/10/2025.
//
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Onboarding Guide: Adding a New Graph Type</title>
</head>
<body>

    <h2>Onboarding Guide: Adding a New Graph Type</h2>

    <p>This guide walks you through adding a new graph type to the AR rendering pipeline. The system uses a modular architecture based on the <code>GraphRenderer</code> protocol and a central <code>GraphRendererRegistry</code>.</p>

    <h3>1. Define the Graph Type</h3>

    <p>Update the <code>GraphType</code> enum to include your new graph:</p>

    <pre><code>enum GraphType {
    case scatterPlot
    case surfacePlot   <!-- Add your new type here -->
    case histogramPlot
    // etc.
}
    </code></pre>

    <h3>2. Create a Renderer</h3>

    <p>Conform to the <code>GraphRenderer</code> protocol:</p>

    <pre><code>struct SurfacePlotRenderer: GraphRenderer {
    func buildGraph(from configuration: GraphingConfiguration, in sceneView: ARSCNView)
        -> (SCNNode, [SCNNode: [String: Any]]) {

        // Load and validate data
        // Extract axis keys and category
        // Build your custom node
        // Return (node, nodeMap)
    }
}
    </code></pre>

    <h3>3. Register the Renderer</h3>

    <p>Update <code>GraphRendererRegistry.swift</code>:</p>

    <pre><code>struct GraphRendererRegistry {
    static func renderer(for type: GraphType?) -> GraphRenderer? {
        guard let type = type else { return nil }
        switch type {
            case .scatterPlot: return ScatterPlotRenderer()
            case .surfacePlot: return SurfacePlotRenderer()  <!-- Register here -->
            default: return nil
        }
    }
}
    </code></pre>

    <h3>4. Inject Theme via Configuration</h3>

    <p>Update <code>GraphingConfiguration.swift</code> to support theme injection:</p>

    <pre><code>struct GraphingConfiguration {
    let dataSet: DataSet
    let selectedFeatures: [String]
    let selectedGraph: GraphType?
    let theme: ColorTheme = .defaultTheme  <!-- Add this -->
}
    </code></pre>

    <p>Then use it inside your renderer:</p>

    <pre><code>let theme = configuration.theme
    </code></pre>

    <h3>5. ARViewController: No Changes Needed</h3>

    <p><code>ARViewController</code> delegates rendering via <code>GraphRendererRegistry</code>. No changes are needed here unless you want to customize anchor behavior or gesture logic.</p>

    <h3>Done!</h3>
    <p>Your new graph type is now fully integrated. It will be automatically rendered when selected in <code>GraphingConfiguration</code>.</p>

</body>
</html>
